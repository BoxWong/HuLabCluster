# 基本概念
## 两种模式区别
- 批处理作业（采用sbatch命令提交，最常用方式）: 
  - 对于批处理作业（提交后立即返回该命令行终端，用户可进行其它操作）使用sbatch命令提交作业脚本，作业被调度运行后，在所分配的首个节点上执行作业脚本。在作业脚本中也可使用srun命令加载作业任务。提交时采用的命令行终端终止，也不影响作业运行。
- 交互式作业提交（采用srun命令提交）: 
  - 资源分配与任务加载两步均通过srun命令进行: 当在登录shell中执行srun命令时，srun首先向系统提交作业请求并等待资源分配，然后在所分配的节点上加载作业任务。采用该模式，用户在该终端需等待任务结束才能继续其它操作，在作业结束前，如果提交时的命令行终端断开，则任务终止。一般用于短时间小作业测试。
## 用户基本命令
- `sattach`: 吸附到运行中的作业步的标准输入、输出及出错，通过吸附，使得有能
力监控运行中的作业步的IO等。
- `sbatch`: 提交作业脚本使其运行。此脚本一般也可含有一个或多个srun命令启动
并行任务。
- `scancel`: 取消排队或运行中的作业或作业步，还可用于发送任意信号到运行中的
作业或作业步中的所有进程。
- `scontrol`: 显示或设定Slurm作业、队列、节点等状态。
- `sinfo`: 显示队列或节点状态，具有非常多过滤、排序和格式化等选项。
- `squeue`: 显示队列中的作业及作业步状态，含非常多过滤、排序和格式化等选项。
- `srun`: 实时交互式运行并行作业，一般用于段时间测试，或者与sallcoc及sbatch结合。

## 常用参考
- 作业提交：
  - salloc：为需实时处理的作业分配资源，提交后等获得作业分配的资源后运行，作业结束后返回命令行终端。
  - sbatch：批处理提交，提交后无需等待立即返回命令行终端。
 
  常用参数
  - \-\-begin=\<time\>：设定作业开始运行时间，如begin=“18:00:00”。
  - \-\-constraints\<features\>：设定需要的节点特性。
  - \-\-cpu\-per\-task：需要的CPU核数。
  - \-\-error=\<filename\>：设定存储出错信息的文件名。
  - \-\-exclude=\<names\>：设定不采用（即排除）运行的节点。
  - \-\-dependency=\<state:jobid\>：设定只有当作业号的作业达到某状态时才运行。
  - \-\-exclusive[=user|mcs]：设定排它性运行，不允许该节点有它人或某user用户或mcs的作业同时运行。
  - \-\-export=\<name[=value]\>：输出环境变量给作业。
  - \-\-gres=\<name[:count]\>：设定需要的通用资源。
  - \-\-input=\<filename\>：设定输入文件名。
  - \-\-jobname=\<name\>：设定作业名。
  - \-\-label：设定输出时前面有标记（仅限`srun`）。
  - \-\-mem=\<size[unit]\>：设定每个节点需要的内存。
  - \-\-mempercpu=\<size[unit]\>：设定每个分配的CPU所需的内存。
  - \-\-N\<minnodes[maxnodes]\>：设定所需要的节点数。
  - \-\-n：设定启动的任务数。
  - \-\-nodelist=\<names\>：设定需要的特定节点名。
  - \-\-output=\<filename\>：设定存储标准输出信息的文件名。
  - \-\-partition=\<name\>：设定采用的队列。
  - \-\-qos=\<name\>：设定采用的服务质量(QOS)。
  - \-\-signal=[B:]\<num\>[@time]：设定当时间到时发送给作业的信号。
  - \-\-time=\<time\>：设定作业运行时的墙上时钟限制。
  - \-\-wrap=\<command_strings\>：将命令封装在一个简单的sh shell中运行（仅限`sbatch`）。
- 作业管理
  - `scancel`: 取消作业
    * jobid\<job_id_list\>：设定作业号。
    * name=\<name\>：设定作业名。
    * partition=\<name\>：设定采用队列的作业。
    * qos=\<name\>：设定采用的服务质量(QOS)的作业。
    * reservation=\<name\>：设定采用了预留测略的作业。
    * nodelist=\<name\>：设定采用特定节点名的作业。
    * 
  - `squeue`: 查看作业信息
    * format=\<spec\>：格式化输出。
    * jobid\<job_id_list\>：设定作业号。
    * name=\<name\>：设定作业名。
    * partition=\<name\>：设定采用队列的作业。
    * qos=\<name\>：设定采用的服务质量(QOS)的作业。
    * start：显示作业开始时间。
    * state=\<state_list\>：显示特定状态的作业信息。
  - `scontrol`：查看作业、节点和队列等信息
  - 